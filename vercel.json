{
    "version": 2,
    "builds": [
      {
        "src": "api/index.js", // Your main API file
        "use": "@vercel/node"  // Use the Node.js builder
      },
      {
          "src": "package.json", // Make sure Vercel detects frontend if needed
          "use": "@vercel/static-build",
           "config": { "distDir": "." } // Or your build output dir if you have one
      }
    ],
    "routes": [
      // Route API requests
      {
        "src": "/api/(.*)",    // Match any request starting with /api/
        "dest": "/api/index.js" // Forward it to your main API file
      },
      // Serve static files for all other requests
      {
        "src": "/(.*)",       // Match anything else
        "dest": "/$1"         // Serve the corresponding static file
      }
    ],
    "env": {
       "MONGO_URI": "@mongo_uri", // Use Vercel environment variables
       "JWT_SECRET": "@jwt_secret"
    }
  }